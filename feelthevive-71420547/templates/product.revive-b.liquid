{% assign selectedVariant = product.selected_or_first_available_variant | default: product %}
{% assign featured_image = selectedVariant.featured_image | default: product.featured_image %}

<style type="text/css">
  .template-product .main-content { font-size: inherit; }
  .main-content { 
    max-width: 100%; 
    padding: 0;
  }
  .revive { 
    background-image: url({{ 'hero-revive-bar.png' | asset_url }}), url({{ featured_image | img_url: 'master' }});
    background-repeat: no-repeat, no-repeat;
    background-position: right 140px, right top;
    background-size: contain, cover;
  }
  .product-wrap {
    display: block;
    max-width: 1020px; 
    margin: 0 auto;
    padding: 140px 0 40px 0;
    width: auto;
  }
  .product-details {
    max-width: 50%;
    margin: 0 10% 0 auto;
  }

  .page-title {
    color: #fff;
    font-size: 58px;
    font-weight: normal;
    margin: .15em 0;
    text-align: left;
  }

  .pricing-area-options {
    width: 60%;
    margin: 1em 0 1em auto;
  }

  .product-price {
    float: right;
    font-size: 50px;
    font-weight: bold;
    letter-spacing: -.025em;
    line-height: 1;
  }
  .product-options .selector-wrapper, .select-wrapper {
    margin: 0;
  }
  .select-wrapper, input[type="text"], input[type="email"], input[type="password"], input[type="search"], input[type="telephone"], input[type="tel"], input[type="number"], textarea {
    -webkit-border-radius: 0;
    border-radius: 0;
    height: auto;
  }
  .select-wrapper {
    background: transparent;
    border: 0;
    padding: 0;
    width: 50%;
  }
  .product-quantity {
    margin: 0;
  }
  .product-quantity label {
    font-size: 14px;
  }
  .product-quantity input {
    margin-left: 5px;
    padding: 0 10px;
  }

  .product_rp_div, .recurring_title {
    float: left;
  }
  .recurring_title {
    text-transform: uppercase;
  }

  .bold_active {
    background-color: transparent !important;
    border-width: 0 !important;
  }
  .one_time_div, .recurring_div, .mix_div {
    padding: 0 15px !important;
  }
  .frequency_div .frequency_label {
    color: #026c80;
    font-size: 12px;
    padding: 0 0 0 16px !important;
    font-style: oblique;
  }
  .new_discounted_price {
    color: #ee7421 !important;
  }

  .testimonial {
    background: #45bfb0;
    border-top: 1px solid #000;
    border-bottom: 1px solid #fff;
    padding: 20px 0;
  }
  .testimonial blockquote {
    max-width: 1020px;
    margin: 0 auto;
    color: #fff;
    font-size: 20px;
    line-height: 24px;
    font-style: oblique;
    padding-left: 85px;
    position: relative;
  }
  .testimonial blockquote:before {
    content: "\201C";
    font-family: Georgia, serif;
    font-size: 170px;
    font-style: normal;
    position: absolute;
    left: 0;
    top: 120%;
  }
  blockquote cite {
    font-style: normal;
  }

  dl {
    margin: 0;
  }
  dl dt {
    background: #006781;
    border-bottom: 2px solid #fff;
    padding: 0;
    text-align: center;
  }
  dl dt a {
    color: #fff;
    display: block;
    font-size: 30px;
    padding: 0;
    text-transform: uppercase;
  }
  dl dt a:after {
    content: "v";
    font-size: 14px;
    margin-left: 1em;
    position: relative;
    top: -.375em;
  }
  dl dd {
    -webkit-transition: height 1s ease;
    margin: 0 40px;
  }
  dl dd p {
    max-width: 1020px;
    margin: 1em auto;
  }

  .related-products {
    border-top: 0;
    margin-top: 0;
  }

  @media only screen and (max-width: 1030px) {
    .revive {
      background-position: right 40px, center top;
    }
    .product-wrap {
      padding: 40px 20px 40px;
    }

    .page-title {
      font-size: 50px;
    }

    .testimonial {
      padding: 20px;
    }
  }

  @media only screen and (max-width: 840px) {
    .page-title {
      font-size: 40px;
    }

    .pricing-area-options {
      width: 100%;
    }

    .testimonial blockquote {
      font-size: 16px;
      font-size: 1rem;
    }
  }

  @media only screen and (max-width: 720px) {
    .product-details.mobile {
      display: none;
    }
    .product-details {
      display: block;
    }
    .product-wrap {
      padding: 20px;
    }
    .template-product .page-title {
      font-size: 32px;
      margin-bottom: 16px;
    }
    .product-description {
      margin-top: 16px;
      line-height: 1.2;
    }
    .pricing-area {
      margin: 16px 0;
    }
    .product-price {
      font-size: 24px;
      margin: 0 10px 0 0;
    }
    .select-wrapper {
      padding: 5px 35px 5px 10px;
    }
    .product-quantity {
      margin: 10px 0 10px 5px;
    }
    .product-quantity input {
      padding: 5px;
      width: 35px;
    }
    .product-quantity label.desktop {
      display: none;
    }
    .product-quantity label.mobile {
      display: inline-block;
    }

    .recurring_title {
      padding: 10px 10px 0;
    }

    .testimonial blockquote:before {
      top: 80%;
    }
  }

  @media only screen and (max-width: 550px) {
    .revive {
      background-image: url({{ featured_image | img_url: 'master' }});
      background-repeat: no-repeat;
      background-position: left top;
      background-size: contain;
    }
    .product-wrap {
      padding-top: 43.86%;
      padding-top: calc(43.86% + 20px);
    }

    .page-title {
      text-align: right;
      color: #006680;
    }

    .product-details {
      margin: 0 auto;
      max-width: 100%;
      padding: 0 20px;
    }

    .product-price {
      margin: 1em 10px 0 0;
    }

    .select-wrapper {
      padding: 5px 35px 5px 5px;
    }

    .recurring_title {
      padding: 10px 10px 10px 0;
    }
    .one_time_div, .recurring_div, .mix_div {
      padding: 0 !important;
    }

    .testimonial blockquote:before {
      top: 50%;
    }

  }
</style>

<script>
  $(function() {

    var allPanels = $('.expanded dd').hide();
    $('.expanded dd:first-of-type').show();
      
    $('.expanded dt > a').click(function() {
      allPanels.slideUp();
      $(this).parent().next().slideDown();
      return false;
    });
  });
</script>

<div class="revive" itemscope itemtype="http://schema.org/Product">
  {% include 'product-page-details' %}

  <div class="product-wrap">

    <div class="product-details">
      <h1 class="page-title" itemprop="name">{{ product.title }}</h1>

      {% if product.description.size > 0 %}
      <div class="product-description rte" itemprop="description">
        {{ product.description }}
      </div>
      {% endif %}

      {% if settings.product-display-vendor %}
        <p class="meta vendor" itemprop="brand">{{ product.vendor }}</p>
      {% endif %}

      <div class="pricing-area">
        <form class="product-form" action="/cart/add" method="post" id="product-form" onsubmit=”_gaq.push([‘_trackEvent’, ‘reVIVE’, ‘Add to Cart’, ‘reVIVE-addition’]);”>      

          <div class="pricing-area-options cf">
            <p class="product-price" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
              <span class="price" itemprop="price">
                <span class="money">{{ selectedVariant.price | money }}</span>

                {% unless product.variants.size == 1 and product.compare_at_price_min <= selectedVariant.price %}
                  <span class="original money">
                    {% if selectedVariant.compare_at_price > selectedVariant.price %}
                      {{ selectedVariant.compare_at_price | money }}
                    {% endif %}
                  </span>
                {% endunless %}
              </span>
            </p>
            
            {% if product.variants.size > 1 %}
              <div class="product-options">
                <select name="id" id="product-select" class="product-select">
                  {% for variant in product.variants %}
                    <option {% if variant == selectedVariant %} selected="selected" {% endif %} value="{{ variant.id }}" data-price="{{ variant.price | money_without_currency | remove: ',' }}">{{ variant.title }} - {{ variant.price | money }}</option>

                  {% endfor %}
                </select>

              </div>
            {% else %}
              <input type="hidden" name="id" class="product-select" value="{{ product.variants[0].id }}" data-variant-title="{{ product.variants[0].title }}" />
            {% endif %}

            <div class="input-wrapper product-quantity">
              <label for="quantity"><strong>{{ 'general.quantity' | t }}:</strong></label>
              <input type="text" name="quantity" id="quantity" value="1" />
            </div>
          </div>
          
          <input name="shopify_customer_id" type="hidden" value="{{ customer.id }}" > 
          <input name="email" type="hidden" value="{{ customer.email }}" > 
          <input name="address1" type="hidden" value="{{ customer.default_address.address1 }}" > 
          <input name="address2" type="hidden" value="{{ customer.default_address.address2 }}" > 
          <input name="city" type="hidden" value="{{ customer.default_address.city }}" > 
          <input name="company" type="hidden" value="{{ customer.default_address.company }}" > 
          <input name="country" type="hidden" value="{{ customer.default_address.country }}" > 
          <input name="first_name" type="hidden" value="{{ customer.default_address.first_name }}" > 
          <input name="last_name" type="hidden" value="{{ customer.default_address.last_name }}" > 
          <input name="phone" type="hidden" value="{{ customer.default_address.phone }}" > 
          <input name="province" type="hidden" value="{{ customer.default_address.province }}" > 
          <input name="zip" type="hidden" value="{{ customer.default_address.zip }}" >

          <div class="cf">
            {% include 'bold-ro' with product %}

            <div class="add-to-cart right">
        
              {% if product.available %}
                <div class="product-form-submit-wrap">
                    <input type="submit" value="{{ 'products.product.add_to_cart' | t }}" class="addtocart"/>
            			  <!-- bold-ro-liquid --> <div class="bold_add_to_orders left" style="display: inline-block;"> </div> <!-- bold-ro-liquid -->
                  <div class="add-to-cart-loader"></div>
                </div>

                {% capture cart_link %}
                  <a href="/cart">{{ 'products.product.cart_link' | t }}</a>
                {% endcapture %}
                {% capture continue_link %}
                  <a href="/collections/vive-subscriptions">{{ 'products.product.continue_link' | t }}</a>
                {% endcapture %}
                {% capture checkout_link %}
                  <a href="/checkout">{{ 'products.product.checkout_link' | t }}</a>
                {% endcapture %}
                {% capture product_item %}
                  <span class='added-product-name'></span>
                {% endcapture %}
                <div style="clear:both; height: 0;">&nbsp;</div>
                <p class="product-add-success-message">{{ 'products.product.success_html' | t: cart_link: cart_link, continue_link: continue_link, checkout_link: checkout_link, product: product_item  }}</p>

                <p class="product-add-error-message"></p>
              {% else %}
                <input type="button" class="disabled" disabled="disabled" value="{{ 'products.product.sold_out' | t }}" />
              {% endif %}
            </div>
          </div>

        </form>
      </div>
    </div>

    {% if settings.product-show-info-link-1 or settings.product-show-info-link-2 %}
    <div class="product-more-info">
      {% if settings.product-show-info-link-1 %}
        <p class="product-info-link {{ settings.product-info-link-icon-1 }}">
          {% if settings.product-info-link-url-1.size > 0 %}<a href="{{ settings.product-info-link-url-1 }}">{% endif %}
            {{ settings.product-info-link-text-1 }}
          {% if settings.product-info-link-url-1.size > 0 %}</a>{% endif %}
        </p>
      {% endif %}

      {% if settings.product-show-info-link-2 %}
        <p class="product-info-link {{ settings.product-info-link-icon-2 }}">
          {% if settings.product-info-link-url-2.size > 0 %}<a href="{{ settings.product-info-link-url-2 }}">{% endif %}
            {{ settings.product-info-link-text-2 }}
          {% if settings.product-info-link-url-2.size > 0 %}</a>{% endif %}
        </p>
      {% endif %}
    </div>
    {% endif %}

  </div>

</div><!-- close itemscope -->

<div class="testimonial">
  <blockquote>"I am absolutely loving the reVIVE! I find that I don't feel as sluggish throughout my day and that I don't yawn all day like I used to. Can't wait to see what else they have to offer!!" <cite>-Stacy, Plymouth, MN</cite></blockquote>
</div>

<div class="expanded">
  <dl>
    {% if product.metafields.extra %}
      {% assign extra = product.metafields.extra %}
      {% assign key = 'extra' %}
      <dt><a class="accordion" href="#info"><strong>Information</strong></a></dt>
      <dd id="info">{{ extra.extra }}</dd>
    {% endif %}

    {% if product.metafields.ingredients %}
      {% assign ingredients = product.metafields.ingredients %}
      {% assign key = 'active' %}
      <dt><a class="accordion" href="#ingredients"><strong>Active Ingredients</strong></a></dt>
      <dd id="ingredients"><p>{{ ingredients.active }}</p></dd>
    {% endif %}

    {% if product.metafields.disclaimers %}
      {% assign disclaimers = product.metafields.disclaimers %}
      {% assign key = 'disclaimer' %}
      <dt><a class="accordion" href="#disclaimer"><strong>Disclaimer</strong></a></dt>
      <dd id="disclaimer"><p><em>{{ disclaimers.disclaimer }}</em></p></dd>
    {% endif %}
  </dl>
</div>

{% include 'product-page-related' %}

<script>
  // required for splitting variants
  // see ProductView
  window.productJSON = {{ product | json }};
</script>
