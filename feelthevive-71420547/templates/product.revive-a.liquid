{% assign selectedVariant = product.selected_or_first_available_variant | default: product %}
{% assign featured_image = selectedVariant.featured_image | default: product.featured_image %}

<style type="text/css">
  .template-product .main-content { font-size: inherit; }
  .main-content { 
    max-width: 100%; 
    padding: 0;
  }
  .revive { 
    background: url({{ featured_image | img_url: 'master' }}) no-repeat right top;
    background-size: cover;
  }
  .product-wrap {
    display: block;
    max-width: 1020px; 
    margin: 0 auto;
    padding: 60px 0 40px 0;
    width: auto;
  }
  .product-details {
    max-width: 50%;
    margin: 0 0 0 auto;
  }

  .page-title, .product-description {
    color: #fff;
    text-align: right;
  }
  .page-title {
    font-weight: normal;
    margin: 0 0 1em;
  }

  .product-price, .product-options, .product-quantity {
    display: inline-block;
    color: #fff;
    vertical-align: middle;
  }
  .product-price {
    font-size: 50px;
    font-weight: bold;
    letter-spacing: -.025em;
    line-height: 1em;
    margin: 0 15px 0 0;
  }
  .product-options .selector-wrapper, .select-wrapper {
    margin: 0;
  }
  .select-wrapper, input[type="text"], input[type="email"], input[type="password"], input[type="search"], input[type="telephone"], input[type="tel"], input[type="number"], textarea {
    -webkit-border-radius: 0;
    border-radius: 0;
    height: 35px;
    border: 1px solid #000;
  }
  .select-wrapper {
    padding: 5px 45px 5px 15px;  
  }
  .product-quantity {
    margin-left: 15px;
  }
  .product-quantity input {
    margin-left: 5px;
    padding: 5px 15px;
  }

  .product-quantity label.mobile {
    display: none;
  }

  .product_rp_div, .recurring_title {
    color: #fff !important;
  }
  .bold_active {
    background-color: transparent !important;
    border-width: 0 !important;
  }
  .one_time_div, .recurring_div, .mix_div {
    padding: 0 15px !important;
  }
  .new_discounted_price {
    color: #ee7421 !important;
  }
  .frequency_label {
    padding: 0 0 0 15px !important;
  }

  .product-form-submit-wrap, .product-form-submit-wrap input {
    width: 100%;
  }

  .testimonial {
    background: #cccccc;
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    padding: 20px 0;
  }
  .testimonial blockquote {
    max-width: 1020px;
    margin: 0 auto;
    color: #026680;
    font-size: 20px;
    line-height: 24px;
    font-style: oblique;
  }
  blockquote cite {
    color: #f47721;
  }

  ul.tabs {
    margin: 0 auto;
    max-width: 1020px;
    padding-left: 20px;
  }
  ul.tabs li {
    cursor: pointer;
    display: inline-block;
    font-size: 20px;
    line-height: 1.2;
    margin: 0 -3px;
    padding: 24px;
    border: 1px solid #000;
    border-left: 0;
    transform: skewX(-25deg);
  }
  ul.tabs li:first-child, ul.tabs li.current {
    border-left: 1px solid #000;
  }
  ul.tabs li.current {
    background: #45bfb0;
  }
  ul.tabs li strong { 
    transform: skewX(25deg);
    display: inline-block;
  }
  .tabContent {
    background: #45bfb0;
    border-top: 2px solid #000;
    border-bottom: 2px solid #000;
    margion-top: -1px;
    padding: 20px 0;
  }
  .tabContent p {
    max-width: 1020px;
    margin: 0 auto 1em;
    color: #fff;
    font-size: 20px;
    line-height: 1.2;
  }
  .tabContent p:last-of-type {
    margin-bottom: 0;
  }

  .tabContent { display: none; }
  .tabContent.current { display: block; }

  .related-products {
    border-top: 0;
    margin-top: 0;
  }

  @media only screen and (max-width: 1030px) {
    .revive {
      background-position: center top;
    }
    .product-wrap {
      padding: 60px 20px 40px;
    }

    .testimonial, .tabContent {
      padding: 20px;
    }

    .testimonial blockquote, ul.tabs li, .tabContent p {
      font-size: 16px;
      font-size: 1rem;
    }
  }

  @media only screen and (max-width: 720px) {
    .product-details.mobile {
      display: none;
    }
    .product-details {
      display: block;
    }
    .product-wrap {
      padding: 20px;
    }
    .template-product .page-title {
      font-size: 32px;
      margin-bottom: 16px;
    }
    .product-description {
      margin-top: 16px;
      line-height: 1.2;
    }
    .pricing-area {
      margin: 16px 0;
    }
    .product-price {
      font-size: 24px;
      margin: 0 10px 0 0;
    }
    .select-wrapper {
      padding: 5px 35px 5px 10px;
    }
    .product-quantity {
      margin: 10px 0 10px 5px;
    }
    .product-quantity input {
      padding: 5px;
      width: 35px;
    }
    .product-quantity label.desktop {
      display: none;
    }
    .product-quantity label.mobile {
      display: inline-block;
    }

    .recurring_title {
      padding: 10px 10px 0;
    }
  }

  @media only screen and (max-width: 700px) {
    .product-price {
      display: block;
    }

    ul.tabs {
      padding: 0 15px;
    }
  }

  @media only screen and (max-width: 550px) {
    .revive {
      background: #016780 url({{ 'hero-revive-a-mobile.png' | asset_url}}) no-repeat center top;
      background-size: contain;
    }
    .product-wrap {
      padding-top: 68.63%;      
      padding-top: calc(68.63% - 20px);      
    }
    .product-details {
      max-width: 100%;
    }
    .page-title, .product-description {
      text-align: left;
    }

    .product-price {
      display: inline-block;
    }
  }

  @media only screen and (max-width: 500px) {
    ul.tabs li {
      padding: 12px;
    }
  }

</style>

<script>
  $(function() {

    $('ul.tabs li').click(function() {
      var tabId = $(this).attr('data-tab');

      $('ul.tabs li').removeClass('current');
      $('.tabContent').removeClass('current');

      $(this).addClass('current');
      $("#" + tabId).addClass('current');
    });
  });

</script>

<div class="revive" itemscope itemtype="http://schema.org/Product">
  {% include 'product-page-details' %}

  <div class="product-wrap">

    <div class="product-details">
      <h1 class="page-title" itemprop="name">{{ product.title }}</h1>

      {% if product.description.size > 0 %}
      <div class="product-description rte" itemprop="description">
        {{ product.description }}
      </div>
      {% endif %}

      {% if settings.product-display-vendor %}
        <p class="meta vendor" itemprop="brand">{{ product.vendor }}</p>
      {% endif %}

      <div class="pricing-area">
        <form class="product-form" action="/cart/add" method="post" id="product-form" onsubmit=”_gaq.push([‘_trackEvent’, ‘reVIVE’, ‘Add to Cart’, ‘reVIVE-addition’]);”>      

          <p class="product-price" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
            <span class="price" itemprop="price">
              <span class="money">{{ selectedVariant.price | money }}</span>

              {% unless product.variants.size == 1 and product.compare_at_price_min <= selectedVariant.price %}
                <span class="original money">
                  {% if selectedVariant.compare_at_price > selectedVariant.price %}
                    {{ selectedVariant.compare_at_price | money }}
                  {% endif %}
                </span>
              {% endunless %}
            </span>
          </p>
          
          {% if product.variants.size > 1 %}
            <div class="product-options">
              <select name="id" id="product-select" class="product-select">
                {% for variant in product.variants %}
                  <option {% if variant == selectedVariant %} selected="selected" {% endif %} value="{{ variant.id }}" data-price="{{ variant.price | money_without_currency | remove: ',' }}">{{ variant.title }} - {{ variant.price | money }}</option>

                {% endfor %}
              </select>

            </div>
          {% else %}
            <input type="hidden" name="id" class="product-select" value="{{ product.variants[0].id }}" data-variant-title="{{ product.variants[0].title }}" />
          {% endif %}

          <div class="input-wrapper product-quantity">
            <label for="quantity" class="desktop">{{ 'general.quantity' | t }}:</label>
            <label for="quantity" class="mobile">{{ 'general.quantity_short' | t }}:</label>
            <input type="text" name="quantity" id="quantity" value="1" />
          </div>
          
          <input name="shopify_customer_id" type="hidden" value="{{ customer.id }}" > 
          <input name="email" type="hidden" value="{{ customer.email }}" > 
          <input name="address1" type="hidden" value="{{ customer.default_address.address1 }}" > 
          <input name="address2" type="hidden" value="{{ customer.default_address.address2 }}" > 
          <input name="city" type="hidden" value="{{ customer.default_address.city }}" > 
          <input name="company" type="hidden" value="{{ customer.default_address.company }}" > 
          <input name="country" type="hidden" value="{{ customer.default_address.country }}" > 
          <input name="first_name" type="hidden" value="{{ customer.default_address.first_name }}" > 
          <input name="last_name" type="hidden" value="{{ customer.default_address.last_name }}" > 
          <input name="phone" type="hidden" value="{{ customer.default_address.phone }}" > 
          <input name="province" type="hidden" value="{{ customer.default_address.province }}" > 
          <input name="zip" type="hidden" value="{{ customer.default_address.zip }}" >
          {% include 'bold-ro' with product %}

          <div class="add-to-cart cf">
      
            {% if product.available %}
              <div class="product-form-submit-wrap left">
                  <input type="submit" value="{{ 'products.product.add_to_cart' | t }}" class="addtocart"/>
          			  <!-- bold-ro-liquid --> <div class="bold_add_to_orders left" style="display: inline-block;"> </div> <!-- bold-ro-liquid -->
                <div class="add-to-cart-loader"></div>
              </div>

              {% capture cart_link %}
                <a href="/cart">{{ 'products.product.cart_link' | t }}</a>
              {% endcapture %}
              {% capture continue_link %}
                <a href="/collections/vive-subscriptions">{{ 'products.product.continue_link' | t }}</a>
              {% endcapture %}
              {% capture checkout_link %}
                <a href="/checkout">{{ 'products.product.checkout_link' | t }}</a>
              {% endcapture %}
              {% capture product_item %}
                <span class='added-product-name'></span>
              {% endcapture %}
              <div style="clear:both; height: 0;">&nbsp;</div>
              <p class="product-add-success-message">{{ 'products.product.success_html' | t: cart_link: cart_link, continue_link: continue_link, checkout_link: checkout_link, product: product_item  }}</p>

              <p class="product-add-error-message"></p>
            {% else %}
              <input type="button" class="disabled" disabled="disabled" value="{{ 'products.product.sold_out' | t }}" />
            {% endif %}
          </div>

        </form>
      </div>
    </div>

    {% if settings.product-show-info-link-1 or settings.product-show-info-link-2 %}
    <div class="product-more-info">
      {% if settings.product-show-info-link-1 %}
        <p class="product-info-link {{ settings.product-info-link-icon-1 }}">
          {% if settings.product-info-link-url-1.size > 0 %}<a href="{{ settings.product-info-link-url-1 }}">{% endif %}
            {{ settings.product-info-link-text-1 }}
          {% if settings.product-info-link-url-1.size > 0 %}</a>{% endif %}
        </p>
      {% endif %}

      {% if settings.product-show-info-link-2 %}
        <p class="product-info-link {{ settings.product-info-link-icon-2 }}">
          {% if settings.product-info-link-url-2.size > 0 %}<a href="{{ settings.product-info-link-url-2 }}">{% endif %}
            {{ settings.product-info-link-text-2 }}
          {% if settings.product-info-link-url-2.size > 0 %}</a>{% endif %}
        </p>
      {% endif %}
    </div>
    {% endif %}

  </div>

</div><!-- close itemscope -->

<div class="testimonial">
  <blockquote>"I am absolutely loving the reVIVE! I find that I don't feel as sluggish throughout my day and that I don't yawn all day like I used to. Can't wait to see what else they have to offer!!" <cite>-Stacy, Plymouth, MN</cite></blockquote>
</div>

<div class="expanded">
  <ul class="tabs">
    {% if product.metafields.extra %}
    <li data-tab="info" class="current"><strong>Information</strong></li>
    {% endif %}

    {% if product.metafields.ingredients %}
    <li data-tab="ingredients"><strong>Active Ingredients</strong></li>
    {% endif %}

    {% if product.metafields.disclaimers %}
    <li data-tab="disclaimer"><strong>Disclaimer</strong></li>
    {% endif %}
  </ul>

  {% if product.metafields.extra %}
    {% assign extra = product.metafields.extra %}
    {% assign key = 'extra' %}
    <div id="info" class="tabContent current">{{ extra.extra }}</div>
  {% endif %}

  {% if product.metafields.ingredients %}
    {% assign ingredients = product.metafields.ingredients %}
    {% assign key = 'active' %}
    <div id="ingredients" class="tabContent"><p>{{ ingredients.active }}</p></div>
  {% endif %}

  {% if product.metafields.disclaimers %}
    {% assign disclaimers = product.metafields.disclaimers %}
    {% assign key = 'disclaimer' %}
    <div id="disclaimer" class="tabContent"><p><em>{{ disclaimers.disclaimer }}</em></p></div>
  {% endif %}
</div>

{% include 'product-page-related' %}

<script>
  // required for splitting variants
  // see ProductView
  window.productJSON = {{ product | json }};
</script>
